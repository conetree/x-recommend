# 轻量级开源(性价比型) 方案基线

## 目标与规模基线
- DAU: 300万
- 片库: 3万部左右
- 峰值QPS: 5000-10000
- 日增行为: 1000万条
- 上线周期: 2-3个月
- 团队: 4-6人
- 月成本: 约4.3万

## 方案核心
- 核心栈: gorse + Flink + Faiss
- 画像链路: 标签管理 -> 向量化 -> 实时更新
- 推荐链路: 召回 -> 排序 -> 重排
- 主要策略: 以片推片 + 按人推片 + 协同过滤

## 组件选型与职责
- gorse: 召回/排序一体, 支持CF与轻量模型
- Flink: 行为流处理, 实时特征更新, 事件清洗
- Faiss: 向量检索(单机为主)
- Redis: 热点特征缓存与在线特征读取
- PostgreSQL: 离线画像与业务配置
- Kafka: 行为日志与流式管道

## 算法与模型配置(建议起步)
- 召回: gorse内置 + Item2Vec + 热门/新片/运营池
- 排序: gorse内置 + Surprise(SVD++)
- 重排: 多样性/新鲜度/去重策略
- 冷启动: 内容标签 + 热门榜 + 运营池

## 系统架构概要
1. 终端埋点 -> Kafka
2. Flink清洗/聚合 -> 画像与特征落库
3. gorse定期训练/更新 -> 召回与排序服务
4. Faiss用于向量相似检索 -> 以片推片
5. 在线API -> Redis缓存 -> gorse召回/排序 -> 重排

## SLA与容量建议
- 在线推荐延迟: P95 150-250ms
- 召回路数: 6-8路(轻量配置)
- 训练频率: 每日全量 + 小时级增量
- 高峰QPS: 1-2台主机水平扩展(按实际压测调整)

## 主要优势
- 低成本, 快速上线
- 小团队可交付
- 运维简单, 组件少

## 主要限制
- 推荐效果上限有限(CTR提升10-20%)
- 语义理解弱, 多模态能力不足
- 扩展性受限(单机/小集群)
- 重排/策略层能力有限

## 向上演进路径
- 召回扩展: 引入Milvus或ES混合检索
- 排序升级: 引入KerasRS/DeepFM
- 语义增强: 文本/图像Embedding
- 强化学习: Bandit/RL作为在线策略

## 输出时的默认表述
- 适合: 初创期/验证期/预算有限/两到三个月上线
- 不适合: 强个性化、深语义、多模态、千万级DAU
